
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/swig/)
configure_file(marsyas.py ${CMAKE_CURRENT_BINARY_DIR}/marsyas.py COPYONLY)
configure_file(pvoc.py ${CMAKE_CURRENT_BINARY_DIR}/pvoc.py COPYONLY)


SET(CMAKE_SWIG_OUTDIR ${CMAKE_CURRENT_BINARY_DIR})
SET(CMAKE_SWIG_FLAGS "")

SET_SOURCE_FILES_PROPERTIES(marsyas.i PROPERTIES CPLUSPLUS ON)
SET_SOURCE_FILES_PROPERTIES(marsyas.i PROPERTIES SWIG_FLAGS "-includeall")
SWIG_ADD_MODULE(marsyas python  marsyas.i)
SWIG_LINK_LIBRARIES(marsyas marsyas ${PYTHON_LIBRARIES} ${OS_LIBS})

set(
  PYTHON_ARG_STRING
  "-c \"from distutils import sysconfig\;"
  "print sysconfig.get_python_lib(1,0)\""
  )
  exec_program(
  ${PYTHON_EXECUTABLE}
  ARGS ${PYTHON_ARG_STRING}
  OUTPUT_VARIABLE PYTHON_INSTDIR
  )


install(TARGETS _marsyas LIBRARY DESTINATION ${PYTHON_INSTDIR})


install(
  FILES ${CMAKE_CURRENT_BINARY_DIR}/marsyas.py 
  DESTINATION ${PYTHON_INSTDIR}
  )



import marsyas_python 


mng = marsyas_python.MarSystemManager() 

# print mng.registeredPrototypes()


pnet = mng.create("Series", "pnet")
src = mng.create("SineSource", "src")
# src = mng.create("SoundFileSource", "src");
gain = mng.create("Gain", "gain") 
dest = mng.create("SoundFileSink", "dest") 
# dest = mng.create("AudioSink", "dest")     

pnet.addMarSystem(src)
pnet.addMarSystem(gain) 
pnet.addMarSystem(dest)




# pnet.updControl("SoundFileSource/src/mrs_string/filename", "/Users/gtzan/data/sound/music_speech/music/gravity.au")
pnet.updControl("SineSource/src/mrs_real/frequency", 999.0)
print pnet.getControl("SineSource/src/mrs_real/frequency")

# Audio has lots of clicks and seems to crash - not sure why 
# pnet.updControl("AudioSink/dest/mrs_bool/initAudio", True)

pnet.updControl("SoundFileSink/dest/mrs_string/filename", "foo.wav")
print pnet.getControl("SoundFileSink/dest/mrs_string/filename")

for j in range (1,8): 
    pnet.updControl("SineSource/src/mrs_real/frequency", j * 220.0)

    for i in range (1,20):	
    	    	pnet.tick()




